# ClassicLink概述 {#concept_q5z_kwb_sdb .concept}

专有网络提供ClassicLink功能，使经典网络的ECS实例可以和VPC中的云资源通过内网互通。

## 互通原理 {#section_jlf_pwb_sdb .section}

经典网络和VPC互通与经典网络和经典网络互通的底层实现是一致的，因此内网延迟不变，内网带宽限速不变。宕机迁移、热迁移、停止、启动、重启、更换系统盘等操作不会改变已建立的ClassicLink连接。

经典网络是一个网络平面，VPC是另一个网络平面，ClassicLink是通过路由将这两个网络平面拉齐，让其具备互通的条件。因此使用ClassicLink功能，首先要避免网络地址冲突，做好网络地址规划。

阿里云经典网络中使用的地址段是10.0.0.0/8\(不包括10.111.0.0/16\)，因此只要VPC的地址段与经典网络的地址段不冲突，就可以通过ClassicLink功能通信。可以与经典网络互通的VPC地址段有172.16.0.0/12、10.111.0.0/16、192.168.0.0/16。

## 互通原则 {#section_at5_swb_sdb .section}

使用ClassicLink功能打通经典网络ECS实例和VPC的私网通信后：

-   经典网络ECS实例可以访问目标VPC内的云资源。

    ClassicLink连接成功后，经典网络的ECS实例可以访问已连接的VPC内的云资源，包括ECS实例、RDS、SLB等。比如经典网络ECS实例连接到了地址段为10.0.0.0/8的VPC，该VPC内有个网段为10.111.1.0/24的交换机。如果该交换机内部署了ECS实例、RDS等云资源，则经典网络的ECS实例可以通过ClassicLink功能访问这些云资源。

-   ClassicLink连接成功后，VPC内的ECS实例只能访问已连接到该VPC的经典网络ECS实例，不能访问未连接的经典网络ECS实例，也不能访问经典网络内的其它云资源。


## 连接过程 {#section_h3b_syb_sdb .section}

使用ClassicLink功能打通经典网络ECS实例与VPC的通信，您需要完成以下操作：

1.  **在VPC中开启ClassicLink功能。**

    专有网络要开启ClassicLink功能，需要满足以下条件：

    |专有网络网段|限制|
    |:-----|:-|
    |172.16.0.0/12|该VPC中不存在目标网段为10.0.0.0/8的自定义路由条目。|
    |10.0.0.0/8|     -   该VPC中不存在目标网段为10.0.0.0/8的自定义路由条目。

    -   确保和经典网络ECS实例通信的交换机的网段在10.111.0.0/16内。

 |
    |192.168.0.0/16|     -   该VPC中不存在目标网段为10.0.0.0/8的自定义路由条目。

    -   需要在经典网络ECS实例中增加192.168.0.0/16指向私网网卡的路由。您可以使用提供的脚本添加路由，单击[此处](http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/attach/58095/cn_zh/1502878832385/route192.zip)下载路由脚本。

**说明：** 在运行脚本前，请仔细阅读脚本中包含的readme。

 |

2.  **将经典网络ECS实例连接到VPC**

    将经典网络ECS实例链接到VPC前，注意如下限制：

    -   最多允许50台经典网络ECS实例连接到同一个VPC。

    -   一台经典网络ECS实例只能连接到一个VPC（同账号且同地域）。

        若您要将账号A的ECS实例连接到账号B的VPC，可以将ECS实例从账号A过户到账号B。

        您可以提交工单申请ECS实例过户。过户前，确保您已了解[ECS实例过户须知](https://help.aliyun.com/document_detail/58064.html)。


